# Screenshot CLI - Development Context

## Project Overview

This is a TypeScript CLI tool for taking full-page screenshots of multiple URLs using Puppeteer. The project has been converted from JavaScript to TypeScript with strict type checking and follows modern Node.js development practices.

## Architecture

### Core Components

- **src/index.ts**: Main CLI application with TypeScript interfaces and strict typing
- **bin/screenshot-cli.js**: Executable entry point that loads the compiled JavaScript from dist/
- **dist/**: Compiled JavaScript output directory (generated by TypeScript compiler)

### Key Features

- Full-page screenshot capture with automatic scrolling
- Concurrent processing with configurable batch sizes
- Smart filename generation with timestamps and URL-based names
- Comprehensive error handling and logging
- Type-safe configuration options

## Development Standards

### TypeScript Configuration

- Strict mode enabled with all strict flags
- No `any` or `as` type assertions allowed
- Functions defined with `const` declarations
- Classes avoided unless complex state management is required
- Comprehensive type definitions for all interfaces

### Code Style

- Functional programming approach
- Clear, descriptive variable and function names
- Proper error handling with typed error objects
- Minimal dependencies (only Puppeteer and Commander.js)

### Build Process

- TypeScript compilation to CommonJS in dist/ directory
- Source maps and declaration files generated
- Clean build process with npm scripts
- Proper entry points configured for both development and production

## Commands for Development

```bash
# Install dependencies (including TypeScript dev dependencies)
npm install

# Build the project
npm run build

# Development with watch mode
npm run dev

# Type checking only
npm run typecheck

# Clean build artifacts
npm run clean

# Lint code (when ESLint is configured)
npm run lint
```

## Testing the CLI

After building, you can test the CLI locally:

```bash
# Build first
npm run build

# Test the CLI
node bin/screenshot-cli.js https://example.com
```

## NPM Publishing

The package is configured for npm publishing with:
- Proper entry points in package.json
- Files array specifying what to include in the package
- Executable bin script for global installation
- Semantic versioning

To publish:
```bash
npm run prepublishOnly  # Automatically runs clean and build
npm publish
```

## Dependencies

### Runtime Dependencies
- `puppeteer`: Browser automation for screenshots
- `commander`: CLI argument parsing

### Development Dependencies
- `typescript`: TypeScript compiler
- `@types/node`: Node.js type definitions
- `eslint` + TypeScript ESLint plugins: Code linting

## File Structure

```
├── src/
│   └── index.ts          # Main TypeScript source
├── bin/
│   └── screenshot-cli.js # Executable entry point
├── dist/                 # Compiled output (gitignored)
├── node_modules/         # Dependencies (gitignored)
├── screenshots/          # Default output directory (gitignored)
├── package.json          # Package configuration
├── tsconfig.json         # TypeScript configuration
├── .gitignore           # Git ignore rules
├── README.md            # User documentation
└── CLAUDE.md            # This development context file
```

## Notes for Future Development

- All type definitions are strict - no implicit any types
- Error handling uses proper Error type checking
- Async/await patterns used throughout
- No classes used - functional approach maintained
- Puppeteer browser instances are properly cleaned up
- Concurrent processing is implemented with proper batch handling